<html><body bgcolor="#000000" text="#ffffff"><table><tr><td colspan="2"><h3>Problem Statement</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><p><i>
This problem has a nonstandard time limit: 3 seconds.
</i></p>
<p>
A set of lines in the two-dimensional plane splits the plane into some regions.
Given a set of lines L, let two(L) be the number of regions of the plane that are adjacent to exactly two lines in L.
</p>
<p>
You are given n lines in a 2D plane.
The i-th line can be described with the equation <b>a</b>[i]x + <b>b</b>[i]y = <b>c</b>[i].
For your convenience the lines are in a general position. 
More precisely:
</p>
<ul>
<li>No line is horizontal or vertical.</li>
<li>No two lines are parallel.</li>
<li>No three lines intersect at the same point.</li>
</ul>
<p>
Compute the sum of two(L) where L goes over all subsets of the given n lines.
Return the result modulo 10^9 + 7.
</p></td></tr><tr><td colspan="2"><h3>Definition</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Class:</td><td>TwoLineRegions</td></tr><tr><td>Method:</td><td>count</td></tr><tr><td>Parameters:</td><td>vector &lt;int&gt;, vector &lt;int&gt;, vector &lt;int&gt;</td></tr><tr><td>Returns:</td><td>int</td></tr><tr><td>Method signature:</td><td>int count(vector &lt;int&gt; a, vector &lt;int&gt; b, vector &lt;int&gt; c)</td></tr><tr><td colspan="2">(be sure your method is public)</td></tr></table></td></tr><tr><td colspan="2"><h3>Limits</h3></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td>Time limit (s):</td><td>3.000</td></tr><tr><td>Memory limit (MB):</td><td>256</td></tr><tr><td>Stack limit (MB):</td><td>256</td></tr></table></td></tr><tr><td colspan="2"><h3>Constraints</h3></td></tr><tr><td align="center" valign="top">-</td><td>n will be between 2 and 1,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td><b>a,b,c</b> will have exactly n elements each.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>a,b,c</b> will be between -10,000 and 10,000, inclusive.</td></tr><tr><td align="center" valign="top">-</td><td>Each element of <b>a,b</b> will be nonzero.</td></tr><tr><td colspan="2"><h3>Examples</h3></td></tr><tr><td align="center" nowrap="true">0)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,1}</pre></td></tr><tr><td><pre>{1,-1}</pre></td></tr><tr><td><pre>{0,0}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 4</pre></td></tr><tr><td><table><tr><td colspan="2"><p>
Let the two lines be l0 and l1.
The value you should find is the sum of two(L) over the following four L: {}, {l0}, {l1}, and {l0,l1}.
</p>
<p>
Obviously, when you have at most one line, there will be zero regions that are adjacent to exactly two lines.
The subset that contains both lines produces four such regions.
Hence, the answer is 0 + 0 + 0 + 4 = 4.
</p>

<img src="https://www.topcoder.com/contest/problem/TwoLineRegions/ex0.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">1)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,1,1}</pre></td></tr><tr><td><pre>{1,-1,2}</pre></td></tr><tr><td><pre>{0,0,-1}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 15</pre></td></tr><tr><td><table><tr><td colspan="2"><p>
Each of the three subsets that contain two of the three lines produces 4 good regions.
The subset that contains all three lines produces 3 good regions.
Thus, the total over all subsets is 3 * 4 + 3 = 15.
</p>

<img src="https://www.topcoder.com/contest/problem/TwoLineRegions/ex1.png"></img></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">2)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{1,-4,-3,3,8,2}</pre></td></tr><tr><td><pre>{5,3,-4,7,-2,-10}</pre></td></tr><tr><td><pre>{1,-2,-7,1,2,5}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 190</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">3)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-641,827,-531,-804,967,356,873}</pre></td></tr><tr><td><pre>{536,897,778,322,-604,-339,253}</pre></td></tr><tr><td><pre>{591,-938,837,831,-151,461,694}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 408</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr><tr><td align="center" nowrap="true">4)</td><td></td></tr><tr><td>&#160;&#160;&#160;&#160;</td><td><table><tr><td><table><tr><td><pre>{-4828,-2210,-7007,7070,3467,-1837,6908,5221,7181,2544,
-8805,-7864,-4692,9822,5286,-7007,-452,4005,4523,-1363,
-3702,-1157,5197,-3627,-3653,645,-2331,-4397,-9409,-240}</pre></td></tr><tr><td><pre>{-6615,751,-568,9049,-5051,3648,-3729,-941,6227,-1148,848,
853,-19,8846,-3327,-5688,7602,3147,3954,3109,-8913,3595,
6512,6757,3071,600,-9794,-6169,6436,-1560}</pre></td></tr><tr><td><pre>{-5459,4853,3715,1840,6991,-3878,6522,1821,-1622,1947,-7613,
-348,-5993,396,4950,-2304,6235,-9146,5392,-1028,3901,-5660,
-6982,-9060,-1945,-4973,-8950,-2569,-1194,7828}</pre></td></tr></table></td></tr><tr><td><pre>Returns: 412956109</pre></td></tr><tr><td><table><tr><td colspan="2"></td></tr></table></td></tr></table></td></tr></table><p>This problem statement is the exclusive and proprietary property of TopCoder, Inc.  Any unauthorized use or reproduction of this information without the prior written consent of TopCoder, Inc. is strictly prohibited.  (c)2003, TopCoder, Inc.  All rights reserved.  </p></body></html>
